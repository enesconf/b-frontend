{"version":3,"file":"Register-CyztcJVr.js","sources":["../../src/pages/Register.tsx"],"sourcesContent":["import { useState } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport authService from '../services/auth';\n\nexport default function Register() {\n  const navigate = useNavigate();\n  const [error, setError] = useState<string>('');\n  const [loading, setLoading] = useState(false);\n\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    setError('');\n    setLoading(true);\n\n    const formData = new FormData(e.currentTarget);\n    const email = formData.get('email') as string;\n    const password = formData.get('password') as string;\n    const fullName = formData.get('fullName') as string;\n    const registrationCode = formData.get('registrationCode') as string;\n\n    try {\n      await authService.register({ email, password, full_name: fullName, registration_code: registrationCode });\n      // After successful registration, log the user in\n      await authService.login({ email, password });\n      navigate('/', { replace: true });\n    } catch (err: any) {\n      if (err.response?.data?.detail) {\n        setError(typeof err.response.data.detail === 'string' \n          ? err.response.data.detail \n          : 'Registration failed');\n      } else if (err.response?.data?.message) {\n        setError(err.response.data.message);\n      } else {\n        setError('Registration failed. Please try again.');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\n      <div className=\"max-w-md w-full space-y-8\">\n        <div>\n          <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\n            Create your account\n          </h2>\n          <p className=\"mt-2 text-center text-sm text-gray-600\">\n            Or{' '}\n            <Link to=\"/login\" className=\"font-medium text-blue-600 hover:text-blue-500\">\n              sign in to your account\n            </Link>\n          </p>\n        </div>\n        <form className=\"mt-8 space-y-6\" onSubmit={handleSubmit}>\n          {error && (\n            <div className=\"rounded-md bg-red-50 p-4\">\n              <div className=\"text-sm text-red-700\">{error}</div>\n            </div>\n          )}\n          <div className=\"rounded-md shadow-sm -space-y-px\">\n            <div>\n              <label htmlFor=\"fullName\" className=\"sr-only\">\n                Full name\n              </label>\n              <input\n                id=\"fullName\"\n                name=\"fullName\"\n                type=\"text\"\n                autoComplete=\"name\"\n                required\n                className=\"input rounded-t-md rounded-b-none\"\n                placeholder=\"Full name\"\n              />\n            </div>\n            <div>\n              <label htmlFor=\"email\" className=\"sr-only\">\n                Email address\n              </label>\n              <input\n                id=\"email\"\n                name=\"email\"\n                type=\"email\"\n                autoComplete=\"email\"\n                required\n                className=\"input rounded-none\"\n                placeholder=\"Email address\"\n              />\n            </div>\n            <div>\n              <label htmlFor=\"password\" className=\"sr-only\">\n                Password\n              </label>\n              <input\n                id=\"password\"\n                name=\"password\"\n                type=\"password\"\n                autoComplete=\"new-password\"\n                required\n                className=\"input rounded-none\"\n                placeholder=\"Password\"\n              />\n            </div>\n            <div>\n              <label htmlFor=\"registrationCode\" className=\"sr-only\">\n                Registration Code\n              </label>\n              <input\n                id=\"registrationCode\"\n                name=\"registrationCode\"\n                type=\"text\"\n                required\n                className=\"input rounded-t-none rounded-b-md\"\n                placeholder=\"Registration Code\"\n              />\n            </div>\n          </div>\n\n          <div>\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"btn btn-primary w-full flex justify-center\"\n            >\n              {loading ? 'Creating account...' : 'Create account'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n} "],"names":["Register","navigate","useNavigate","error","setError","useState","loading","setLoading","handleSubmit","e","formData","email","password","fullName","registrationCode","authService","err","_b","_a","_d","_c","jsxs","jsx","Link"],"mappings":"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"}